<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-case-study/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">case-study | å­¦ä¹ ç¬”è®°</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/festudy/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/festudy/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/festudy/docs/case-study/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="case-study | å­¦ä¹ ç¬”è®°"><meta data-rh="true" name="description" content="1.fs æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜"><meta data-rh="true" property="og:description" content="1.fs æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜"><link data-rh="true" rel="icon" href="/festudy/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/festudy/docs/case-study/"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/festudy/docs/case-study/" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/festudy/docs/case-study/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/festudy/blog/rss.xml" title="å­¦ä¹ ç¬”è®° RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/festudy/blog/atom.xml" title="å­¦ä¹ ç¬”è®° Atom Feed"><link rel="stylesheet" href="/festudy/assets/css/styles.08536753.css">
<link rel="preload" href="/festudy/assets/js/runtime~main.c378b531.js" as="script">
<link rel="preload" href="/festudy/assets/js/main.c84ceb77.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/festudy/"><div class="navbar__logo"><img src="/festudy/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/festudy/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">æ‚ä¸ƒæ‚å…«</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/festudy/docs/å‰è¨€">å­¦ä¹ ç¬”è®°</a><a class="navbar__item navbar__link" href="/festudy/blog">åšå®¢æ–‡ç« </a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/chovrio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/festudy/docs/å‰è¨€">å‰è¨€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/festudy/docs/html/">html å†…å®¹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/festudy/docs/css/">css</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/festudy/docs/js/">js å†…å®¹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/festudy/docs/react/">react ç›¸å…³</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/festudy/docs/æ‰‹å†™é¢˜/">æ‰‹å†™é¢˜</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/festudy/docs/category/ç®—æ³•å­¦ä¹ è®°å½•">ç®—æ³•å­¦ä¹ è®°å½•</a><button aria-label="Toggle the collapsible sidebar category &#x27;ç®—æ³•å­¦ä¹ è®°å½•&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/festudy/docs/case-study/">case-study</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/festudy/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">case-study</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>case-study</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1fs-æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜">1.fs æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜<a href="#1fs-æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜" class="hash-link" aria-label="Direct link to 1.fs æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜" title="Direct link to 1.fs æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜">â€‹</a></h2><p>è¿™æ˜¯åœ¨é€› vite çš„ issues çš„æ—¶å€™å‘ç°çš„ï¼Œæœ¬æ¥æƒ³ç€æˆ–è®¸å¯ä»¥è§£å†³ä¸‹çš„ï¼Œç„¶åæµ‹è¯•å¯„äº†ã€‚</p><p>å…·ä½“é—®é¢˜åœ¨è¿™ä¸ª <a href="https://github.com/vitejs/vite/issues/14374" target="_blank" rel="noopener noreferrer">issue</a> é‡Œé¢</p><p>æè¿°ä¸€ä¸‹é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªèµ„æºè·¯å¾„æ˜¯ &#x27;xxx/Path/1.png&#x27; ç»è¿‡ vite çš„å¤„ç†ï¼Œæˆ‘åœ¨æ–‡ä»¶é‡Œé¢å¯¼å…¥çš„è·¯å¾„å°±ç®—å†™æˆ &#x27;/xxx/path/1.png&#x27; åœ¨ resolve çš„æ’ä»¶çš„å¤„ç†ä¸‹ä¹Ÿä¼šè¢«è½¬æ¢æˆ &#x27;/xxx/Path/1.png&#x27;(çœŸå®è·¯å¾„)ï¼Œæ‰€ä»¥å¼•å…¥èµ„æºçš„æ—¶å€™ä¸ä¼šæŠ¥é”™ã€‚</p><p>å½“ç„¶è¿™ç§æƒ…å†µä»…é™äº <code>win</code> å’Œ <code>macos</code> ç³»ç»Ÿï¼Œåœ¨å¤§éƒ¨åˆ† <code>unix</code> ç³»ç»Ÿä¸‹æ˜¯è¡Œä¸é€šçš„(maybe)ï¼ŒæŸ¥äº†ä¸€ä¸‹æ˜¯å› ä¸º <code>unix</code> ç³»ç»Ÿå¯¹è·¯å¾„å¤§å°å†™æ•æ„Ÿï¼Œè€Œ <code>win</code> å’Œ <code>macos</code> ç³»ç»Ÿå¯¹è·¯å¾„å¤§å°å†™ä¸æ•æ„Ÿã€‚ä¸¾ä¸€ä¸ªä¾‹å­å§ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">fs</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// win or macos</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æˆ‘çš„æ–‡ä»¶çœŸå®è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// win    &#x27;E:\\web\\vite-demo\\src\\path\\1.jpg&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// macos  &#x27;/xxx/path/1.png&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// unix   &#x27;/xxx/path/1.png&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç„¶åè¾“å…¥ä¸‹é¢çš„ path æ—¶æˆ‘ç»Ÿä¸€å°†ä¸Šé¢è·¯å¾„çš„ path å…¨éƒ¨æ”¹å†™æˆ Path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">statSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// è¿™æ®µä»£ç åœ¨ win å’Œ macos ä¸‹éƒ½æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ä¼šè¿”å›æ–‡ä»¶çš„ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨ unix ä¸‹å°±ä¼šæŠ¥é”™</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨ vite é‡åˆ° import ä¹‹ç±»çš„å¯¼å…¥è¯­å¥çš„æ—¶å€™ï¼Œä¼šèµ°åˆ° resolve è¿™ä¸ªæ’ä»¶çš„é€»è¾‘é‡Œé¢ï¼Œè¿™ä¸ªæ’ä»¶çš„ä¸»è¦ä½œç”¨å°±æ˜¯å¤„ç†è·¯å¾„ï¼Œä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ <code>react</code> è¿™ä¸ªåº“å®ƒæ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œæ‰€ä»¥ vite ä¼šå¯¹å®ƒè¿›è¡Œé¢„æ„å»º(ç”¨äºå¤ç”¨ï¼Œè¿™æ ·å°±ä¸å¿…æ¯æ¬¡éƒ½é‡æ–°æ‰“åŒ…)ï¼Œç„¶åå­˜æ”¾åœ¨<code>node_module/.vite/deps/</code> é‡Œé¢ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨æ–‡ä»¶é‡Œé¢å¯¼å…¥çš„æ—¶å€™åˆæ˜¯ç›´æ¥å¯¼å…¥çš„ <code>react</code>ï¼Œé‚£æ€ä¹ˆæ ·æ‰èƒ½æ‰¾åˆ°çœŸå®çš„è·¯å¾„ï¼Œæˆ–è€…è¯´æˆ‘ä»¬é¢„æƒ³çš„è·¯å¾„å‘¢ã€‚é å¾—å°±æ˜¯ resolve æ’ä»¶ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// å°±ä¸æˆªå›¾äº†ï¼Œè¿™æ˜¯å¼€å‘é˜¶æ®µç»è¿‡ vite ç¼–è¯‘è¿‡åçš„ä»£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç¼–è¯‘å‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ReactDOM</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react-dom/client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç¼–è¯‘å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">__vite__cjsImport1_react</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/node_modules/.vite/deps/react.js?v=cd158394&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> __vite__cjsImport1_react</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__esModule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> __vite__cjsImport1_react</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> __vite__cjsImport1_react</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">__vite__cjsImport2_reactDom_client</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/node_modules/.vite/deps/react-dom_client.js?v=fd88a28b&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">ReactDOM</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> __vite__cjsImport2_reactDom_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__esModule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> __vite__cjsImport2_reactDom_client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> __vite__cjsImport2_reactDom_client</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…·ä½“æµç¨‹æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œé˜…è¯»ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†(å¤ªå¤šäº†ï¼Œæˆ‘ä¹Ÿè¯´ä¸æ¸… ğŸ˜¥)ï¼Œå’Œè¿™ä¸ª <code>case-study</code> ç›¸å…³çš„å†…å®¹åœ¨ <code>tryCleanFsResolve</code> è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œè·¯å¾„åœ¨ <code>packages/vite/src/node/plugins/resolve.ts</code> é‡Œé¢çš„å‰å‡ è¡Œä»£ç å°±æ˜¯</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// è¿™é‡Œçš„ file æ˜¯èµ„æºè·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fileStat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tryStatSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Try direct match first</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fileStat</span><span class="token operator" style="color:#393A34">?.</span><span class="token method function property-access" style="color:#d73a49">isFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getRealPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">preserveSymlinks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™é‡Œçš„ <code>tryStatSync</code> å‡½æ•°ä½œç”¨å¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æåˆ°çš„ <code>fs.statSync</code>ï¼Œåˆ¤æ–­è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨èµ„æºã€‚æ ¹æ®æˆ‘ä»¬ä¸Šé¢çš„ç»“è®ºï¼Œåœ¨è·¯å¾„å¤§å°å†™å†™é”™çš„æƒ…å†µä¸‹ï¼Œ<code>win</code> å’Œ <code>macos</code> èƒ½è¿”å› <code>fs.Stats</code>ï¼Œè€Œ <code>unix</code> ç³»ç»Ÿä¸‹å°±ä¼šç›´æ¥æŠ¥é”™ï¼Œä¸‹é¢çš„é€»è¾‘å°±æ˜¯åˆ¤æ–­ <code>fileStat</code> æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ˜¯çš„è¯å°±è·å–æ–‡ä»¶çš„çœŸå®è·¯å¾„ã€‚ <code>getRealPath</code> å‡½æ•°ä¹Ÿå¾ˆç®€å•ã€‚<code>win</code> ç³»ç»Ÿè°ƒç”¨äº† <code>fs.realpathSync</code> ï¼Œå…¶ä½™è°ƒç”¨ <code>fs.realpathSync.native</code>ã€‚</p><p><code>win</code> ç³»ç»Ÿä¸‹è°ƒç”¨ <code>fs.realpathSync</code> ä¼ å…¥å¤§å°å†™ä¸æ­£ç¡®çš„è·¯å¾„ä¼šè¿”å›çœŸå®çš„(å¤§å°å†™æ­£ç¡®çš„)è·¯å¾„ï¼Œ<code>macos</code> ç³»ç»Ÿä¸‹è°ƒç”¨ <code>fs.realpathSync.native</code> ä¹Ÿä¼šè¿”å›æ­£ç¡®çš„è·¯å¾„(ç”± issue æ¨æµ‹ï¼Œå› ä¸ºæ²¡æœ‰ mac æ²¡æµ‹è¿‡)ã€‚ä½†æ˜¯å¦‚æœæ˜¯ <code>unix</code> ç³»ç»Ÿçš„è¯ï¼Œæ‰§è¡Œ <code>fs.realpathSync.native</code> ä¼ å…¥ä¸€ä¸ªé”™è¯¯(å¤§å°å†™ä¸æ­£ç¡®)çš„è·¯å¾„ï¼Œåˆ™ä¼šç›´æ¥æŠ¥é”™ã€‚</p><p>ä¸è¿‡åœ¨ <code>vite</code> ä¸­å‹æ ¹èµ°ä¸åˆ°è¿™ä¸€æ­¥ï¼Œå› ä¸ºæˆ‘ä»¬åˆšæ‰è¯´äº† <code>unix</code> ç³»ç»Ÿä¸‹è°ƒç”¨ <code>fs.statSync</code> è·¯å¾„ä¸æ­£ç¡®ä¹Ÿä¼šç›´æ¥æŠ¥é”™ã€‚åœ¨ <code>vite</code> çš„ <code>trySatSync</code> å‡½æ•°é‡Œé¢å¯¹é”™è¯¯è¿›è¡Œäº†æ•è·ï¼Œä½†æ˜¯æ²¡åšå¤„ç†ã€‚æ‰€ä»¥æ‰§è¡Œåçš„ <code>fileStae</code> æ˜¯ <code>undefined</code>ï¼Œæ‰€ä»¥å®ƒå‹æ ¹ä¸ä¼šèµ°è¿›ä¸‹æ–¹çš„åˆ¤æ–­ï¼Œè™½ç„¶å°±ç®—èµ°è¿›å»äº†ä¹Ÿè·å–ä¸åˆ°çœŸå®çš„è·¯å¾„ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šé€’å½’(æ„Ÿè§‰ä¸ç®—ç‰¹åˆ«å¥½)</p><p>æ€è·¯ï¼šä»ç¨‹åºæ‰§è¡Œçš„è·¯å¾„å‘åé¢ï¼Œå¯¹èµ„æºçš„å¯¼å…¥è·¯å¾„(è¿™é‡Œä¼ å…¥çš„éƒ½æ˜¯ç»å¯¹è·¯å¾„ï¼Œå› ä¸º vite ä¼šå¯¹è·¯å¾„è¿›è¡Œå¤„ç†éƒ½ä¼šè½¬æ¢æˆç»å¯¹è·¯å¾„ï¼Œåªæ˜¯åœ¨è¿™ä¸€æ­¥éª¤çš„æ—¶å€™æ˜¯ç»å¯¹è·¯å¾„ï¼Œæœ€å resolve å¤„ç†å®Œåçš„è·¯å¾„ä¸æ˜¯)è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶ä¸”å°†è·¯å¾„éƒ½è½¬æ¢æˆå°å†™ï¼Œå¦‚æœå­˜åœ¨ä¸”ç›¸ç­‰å°±å°†è½¬æ¢å°å†™å‰çš„è·¯å¾„æ‹¼æ¥è¿›å»ï¼Œä¸€æ—¦æœ‰ä¸ç›¸ç­‰çš„è·¯å¾„ï¼Œå°±ç›´æ¥é€€å‡ºå¾ªç¯ï¼Œå› ä¸ºè·¯å¾„ä¸å¯èƒ½å­˜åœ¨äº†ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">fs</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">path</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findRealPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">inputPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> projectPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">cwd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> parts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> inputPath</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">projectPath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sep</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  parts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">shift</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> currentPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> projectPath</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> part </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> parts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dirContents </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readdirSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> normalizedPart </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> part</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å°†å½“å‰éƒ¨åˆ†è½¬æ¢ä¸ºå°å†™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> matchingDir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dirContents</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> normalizedPart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">matchingDir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      currentPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentPath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> matchingDir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      flag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æœªæ‰¾åˆ°åŒ¹é…çš„ç›®å½•ï¼Œç»“æŸå¾ªç¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> flag </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> currentPath </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æœ‰äº†ä¸Šé¢è¿™ä¸ªå‡½æ•°è¿‡åï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¹‹å‰é‚£é‡Œæ”¹åŠ¨ä¸€ä¸‹ï¼Œå°±å¯ä»¥è¾¾åˆ°åœ¨ <code>unix</code> ç³»ç»Ÿä¸‹ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œçš„æ•ˆæœäº†ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> fileStat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tryStatSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isWindows </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> fileStat </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findRealPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fileStat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tryStatSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Try direct match first</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fileStat</span><span class="token operator" style="color:#393A34">?.</span><span class="token method function property-access" style="color:#d73a49">isFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getRealPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">preserveSymlinks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å› ä¸ºæˆ‘æœ¬èº«æ²¡æœ‰ <code>unix</code> ç³»ç»Ÿï¼Œæ”¹åŠ¨å®Œä»£ç è¿‡åæ˜¯åœ¨ <code>win</code> ç³»ç»Ÿä¸‹è·‘çš„æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œå¯¹ <code>unix</code> ç³»ç»Ÿçš„æµ‹è¯•æ˜¯åœ¨ <code>stackblitz.com</code> ä¸‹å®Œæˆçš„ï¼Œæˆ‘åœ¨åŸ issue çš„ <code>stackblitz</code> ä»“åº“é‡Œé¢ link äº†æˆ‘æ”¹åŠ¨åçš„ <code>vite</code> ä»£ç ï¼Œé¡µé¢æ­£å¸¸å±•ç¤ºäº†ã€‚ä½†æ˜¯æˆ‘æ²¡åœ¨ <code>unix</code> ç³»ç»Ÿä¸‹è·‘è¿‡æµ‹è¯•ï¼Œåç»­çš„ç»“æœå°±æ˜¯è·‘ <code>ci</code> çš„æ—¶å€™æµ‹è¯•å¯„äº†ï¼Œå“å¾—æˆ‘èµ¶ç´§å…³äº† <code>pr</code> ğŸ˜¢ã€‚ä¸è¿‡æˆªæ­¢(9.16 23:16)ç°åœ¨å…³äºè¿™ä¸ª issue éƒ½æ²¡æœ‰äººå¯¹å®ƒè¿›è¡Œåˆ†ç±»ï¼Œæœ€å¼€å§‹çœ‹åˆ°è¿™ä¸ª issue çš„æ—¶å€™ï¼Œæ²¡æ³¨æ„åˆ°å…·ä½“çš„å†…å®¹è¿˜è¯„è®ºäº† <code>æ–‡ä»¶è·¯å¾„é”™äº†.</code>ï¼Œæœ€å¼€å§‹æˆ‘è§‰å¾—å®ƒä¸èƒ½ç®— <code>bug</code>ï¼Œå› ä¸ºè¿™æœ¬èº«å°±æ˜¯ç”¨æˆ·è‡ªèº«çš„ä¸åˆç†è¡Œä¸ºï¼Œä¸åº”è¯¥ç”±æ¡†æ¶ä¹°å•ï¼Œä½†æ˜¯ <code>vite</code> è‡ªèº«åˆå¯¹å®ƒåšäº†å¤„ç†(è·å–çœŸå®è·¯å¾„)ï¼Œä½†æ˜¯åˆå› ä¸º <code>unix</code> è·¯å¾„å¤§å°å†™æ•æ„Ÿçš„ç‰¹æ€§ï¼Œå¯¼è‡´è‡ªèº«åšçš„å¤„ç†åœ¨ <code>unix</code> æ— æ•ˆï¼Œæ‰€ä»¥è¿™ç®—ä»€ä¹ˆé—®é¢˜äº†ï¼Œä¼šä¸ä¼šæ˜¯<code>ç‰¹æ€§</code>ï¼Ÿ</p><p>update(9.17 1:37):</p><p>å‡Œæ™¨ç¡åºŠä¸Šçªç„¶æƒ³èµ·ï¼Œæµ‹è¯•å¯„æ‰çš„åŸå› æ˜¯å› ä¸ºï¼Œ<code>vite</code> æœ‰åç¼€è¡¥å…¨ï¼Œæ²¡åç¼€çš„æ—¶å€™è‚¯å®šæ‰¾ä¸åˆ°èµ„æºï¼Œä½†æ˜¯ <code>file</code> è·¯å¾„ä¼šè¢«è¦†ç›–æˆç©ºä¸²ï¼Œæ‰€ä»¥æ”¹åŠ¨ä¸€ä¸‹ä»£ç å°±è¡Œäº†(æœ‰ç‚¹ç™½ç—´äº† ğŸ˜¥)</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// æ”¹åŠ¨å‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isWindows </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> fileStat </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findRealPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fileStat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tryStatSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ”¹åŠ¨å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">isWindows </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> fileStat </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findRealPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> file </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newPath</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fileStat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tryStatSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç»§ç»­ç¡è§‰ï¼Œæµ‹è¯•åº”è¯¥æ²¡é—®é¢˜äº†ã€‚ğŸ˜´</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/case-study/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/festudy/docs/arithmetic/hot100/åˆå¹¶åŒºé—´/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">56.åˆå¹¶åŒºé—´</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1fs-æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜" class="table-of-contents__link toc-highlight">1.fs æ¨¡å—çš„å¤§å°å†™æ•æ„Ÿæ€§é—®é¢˜</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/festudy/docs/å‰è¨€">ç¬”è®°</a></li><li class="footer__item"><a class="footer__link-item" href="/festudy/blog">blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/festudy/">none</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.chovrio.club" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/chovrio" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/festudy/assets/js/runtime~main.c378b531.js"></script>
<script src="/festudy/assets/js/main.c84ceb77.js"></script>
</body>
</html>